
    <div class="item-detail-container">
      <div class="container">
        <!-- Back Navigation -->
        <div class="back-navigation">
          <button class="btn btn-outline-secondary" (click)="goBack()">
            ‚Üê Back to Catalog
          </button>
          <nav class="breadcrumb">
            <a [routerLink]="['/shop', storeSlug]">{{ storeInfo?.name || 'Store' }}</a>
            <span class="breadcrumb-separator">/</span>
            <span class="current-page">{{ item?.title || 'Item Detail' }}</span>
          </nav>
        </div>

        <!-- Loading State -->
        <div class="loading-state" *ngIf="loadingService.isLoading(KEYS.ITEM_DETAIL)">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p>Loading item details...</p>
        </div>

        <!-- Error State -->
        <div class="error-message" *ngIf="error && !loadingService.isLoading(KEYS.ITEM_DETAIL)">
          <div class="alert alert-danger">
            {{ error }}
            <button class="btn btn-outline-primary btn-sm ms-2" (click)="loadItemDetail()">Retry</button>
          </div>
        </div>

        <!-- Item Detail Content -->
        <div class="item-detail-content" *ngIf="item && !loadingService.isLoading(KEYS.ITEM_DETAIL) && !error">
          <div class="item-detail-grid">
            <!-- Image Gallery -->
            <div class="image-section">
              <div class="main-image">
                <img
                  [src]="selectedImage?.imageUrl || '/assets/placeholder-item.jpg'"
                  [alt]="selectedImage?.altText || item.title"
                  class="main-img"
                  (error)="onImageError($event)">
              </div>
              <div class="image-thumbnails" *ngIf="item.images.length > 1">
                <button
                  *ngFor="let image of item.images"
                  class="thumbnail-btn"
                  [class.active]="selectedImage?.imageId === image.imageId"
                  (click)="selectImage(image)">
                  <img
                    [src]="image.imageUrl"
                    [alt]="image.altText || item.title"
                    class="thumbnail-img"
                    (error)="onImageError($event)">
                </button>
              </div>
            </div>

            <!-- Item Information -->
            <div class="info-section">
              <div class="item-header">
                <h1 class="item-title">{{ item.title }}</h1>
                <div class="item-meta">
                  <span class="item-category" *ngIf="item.category">{{ item.category }}</span>
                  <span class="item-brand" *ngIf="item.brand">{{ item.brand }}</span>
                </div>
                <div class="item-condition">
                  <span class="condition-label">Condition:</span>
                  <span class="condition-value">{{ item.condition }}</span>
                </div>
              </div>

              <div class="item-pricing">
                <div class="price-display">
                  <span class="current-price">\${{ item.price | number:'1.2-2' }}</span>
                </div>
                <div class="availability-status" [class.available]="item.isAvailable">
                  <span *ngIf="item.isAvailable" class="available-badge">Available</span>
                  <span *ngIf="!item.isAvailable" class="sold-badge">Sold</span>
                </div>
              </div>

              <div class="item-actions">
                <button
                  class="btn btn-primary btn-lg add-to-cart-btn"
                  [disabled]="!item.isAvailable"
                  data-cy="add-to-cart-btn"
                  (click)="addToCart()">
                  <span *ngIf="item.isAvailable">üõí Add to Cart</span>
                  <span *ngIf="!item.isAvailable">Sold Out</span>
                </button>
                <button
                  class="btn btn-outline-secondary btn-lg"
                  data-cy="add-to-favorites-btn"
                  (click)="addToFavorites()">
                  ‚ô° Add to Favorites
                </button>
              </div>

              <div class="item-details">
                <h3>Description</h3>
                <p class="item-description" *ngIf="item.description; else noDescription">
                  {{ item.description }}
                </p>
                <ng-template #noDescription>
                  <p class="no-description">No description available.</p>
                </ng-template>

                <div class="item-specifications" *ngIf="hasSpecifications()">
                  <h4>Specifications</h4>
                  <div class="spec-grid">
                    <div class="spec-item" *ngIf="item.size">
                      <span class="spec-label">Size:</span>
                      <span class="spec-value">{{ item.size }}</span>
                    </div>
                    <div class="spec-item" *ngIf="item.color">
                      <span class="spec-label">Color:</span>
                      <span class="spec-value">{{ item.color }}</span>
                    </div>
                    <div class="spec-item" *ngIf="item.materials">
                      <span class="spec-label">Materials:</span>
                      <span class="spec-value">{{ item.materials }}</span>
                    </div>
                    <div class="spec-item" *ngIf="item.measurements">
                      <span class="spec-label">Measurements:</span>
                      <span class="spec-value">{{ item.measurements }}</span>
                    </div>
                    <div class="spec-item" *ngIf="item.listedDate">
                      <span class="spec-label">Listed:</span>
                      <span class="spec-value">{{ item.listedDate | date:'mediumDate' }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  