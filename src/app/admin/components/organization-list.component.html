
    <div class="organization-list">
      <header class="page-header">
        <h1>Organizations</h1>
        <p>Manage all ConsignmentGenie organizations</p>
      </header>

      <div class="filters">
        <div class="filter-group">
          <label for="searchTerm">Search:</label>
          <input
            id="searchTerm"
            type="text"
            [(ngModel)]="searchTerm"
            placeholder="Search by name, subdomain, or email"
            (input)="applyFilters()"
          >
        </div>

        <div class="filter-group">
          <label for="statusFilter">Status:</label>
          <select id="statusFilter" [(ngModel)]="statusFilter" (change)="applyFilters()">
            <option value="">All Statuses</option>
            <option value="Active">Active</option>
            <option value="Trial">Trial</option>
            <option value="Suspended">Suspended</option>
            <option value="Cancelled">Cancelled</option>
          </select>
        </div>

        <div class="filter-group">
          <label for="tierFilter">Tier:</label>
          <select id="tierFilter" [(ngModel)]="tierFilter" (change)="applyFilters()">
            <option value="">All Tiers</option>
            <option value="Basic">Basic</option>
            <option value="Pro">Pro</option>
            <option value="Enterprise">Enterprise</option>
          </select>
        </div>
      </div>

      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Organization</th>
              <th>Owner</th>
              <th>Subdomain</th>
              <th>Type</th>
              <th>Subscription</th>
              <th>Status</th>
              <th>Users</th>
              <th>Items</th>
              <th>Revenue</th>
              <th>Created</th>
              <th>Last Active</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (org of filteredOrganizations(); track org.id) {
              <tr>
                <td class="org-name">{{ org.name }}</td>
                <td>{{ org.ownerEmail }}</td>
                <td class="subdomain">
                  <code>{{ org.subdomain }}</code>
                  <button class="link-btn" title="Visit Store" (click)="visitStore(org.subdomain)">üîó</button>
                </td>
                <td>
                  <span class="type-badge">{{ org.verticalType }}</span>
                </td>
                <td>
                  <span class="tier-badge" [class]="'tier-' + org.subscriptionTier.toLowerCase()">
                    {{ org.subscriptionTier }}
                  </span>
                </td>
                <td>
                  <span class="status-badge" [class]="'status-' + org.subscriptionStatus.toLowerCase()">
                    {{ org.subscriptionStatus }}
                  </span>
                </td>
                <td class="text-center">{{ org.userCount }}</td>
                <td class="text-center">{{ org.itemCount }}</td>
                <td class="text-right">\${{ org.monthlyRevenue.toLocaleString() }}</td>
                <td>{{ org.createdAt | date:'short' }}</td>
                <td>{{ getTimeAgo(org.lastActivity) }}</td>
                <td class="actions">
                  <button class="btn-action" title="View Details" (click)="viewDetails(org.id)">üëÅÔ∏è</button>
                  <button class="btn-action" title="Login As Owner" (click)="loginAsOwner(org.id)">üîê</button>
                  <button class="btn-action" title="Edit Subscription" (click)="editSubscription(org.id)">üí≥</button>
                  <button class="btn-action danger" title="Suspend" (click)="suspendOrg(org.id)">‚õî</button>
                </td>
              </tr>
            }
            @empty {
              <tr>
                <td colspan="12" class="no-data">
                  No organizations found matching your criteria.
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>

      <div class="pagination">
        <span class="results-count">
          Showing {{ filteredOrganizations().length }} of {{ allOrganizations().length }} organizations
        </span>
      </div>
    </div>
  