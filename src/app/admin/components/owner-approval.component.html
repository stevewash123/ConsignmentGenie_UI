
    <app-admin-layout>
      <div class="owner-approval">
        <header class="page-header">
          <h1>Owner Management</h1>
          <p class="subtitle">Manage shop owner registrations and invitations</p>

          <div class="header-actions">
            <button class="invite-owner-btn" (click)="openInviteModal()">
              <span class="btn-icon">üìß</span>
              Invite New Owner
            </button>
          </div>
        </header>

        <!-- Tab Navigation -->
        <div class="tabs">
          <button
            class="tab-button"
            [class.active]="activeTab() === 'approvals'"
            (click)="setActiveTab('approvals')"
          >
            <span class="tab-icon">‚è≥</span>
            Pending Approvals
            @if (pendingOwners().length > 0) {
              <span class="tab-badge">{{ pendingOwners().length }}</span>
            }
          </button>
          <button
            class="tab-button"
            [class.active]="activeTab() === 'invitations'"
            (click)="setActiveTab('invitations')"
          >
            <span class="tab-icon">üìß</span>
            Owner Invitations
          </button>
        </div>

        <!-- Tab Content -->
        <div class="tab-content">
          <!-- Pending Approvals Tab -->
          @if (activeTab() === 'approvals') {
            <div class="tab-panel">
              @if (isComponentLoading()) {
                <div class="loading-state">
                  <div class="spinner"></div>
                  <p>Loading pending approvals...</p>
                </div>
              } @else if (errorMessage()) {
                <div class="error-message">
                  <span class="error-icon">‚ö†Ô∏è</span>
                  {{ errorMessage() }}
                  <button class="retry-btn" (click)="loadPendingOwners()">Try Again</button>
                </div>
              } @else if (pendingOwners().length === 0) {
                <div class="empty-state">
                  <div class="empty-icon">‚úÖ</div>
                  <h3>No Pending Approvals</h3>
                  <p>All owner registrations have been reviewed. Check back later for new submissions.</p>
                  <button class="refresh-btn" (click)="loadPendingOwners()" [disabled]="isComponentLoading()">Refresh</button>
                </div>
              } @else {
                <div class="approvals-container">
                  <div class="approvals-header">
                    <h2>Pending Approvals ({{ pendingOwners().length }})</h2>
                    <button class="refresh-btn" (click)="loadPendingOwners()" [disabled]="isComponentLoading()">
                      <span class="refresh-icon">üîÑ</span>
                      Refresh
                    </button>
                  </div>

                  <div class="approvals-grid">
                    @for (owner of pendingOwners(); track owner.userId) {
                      <div class="approval-card" [class.processing]="processingUsers().has(owner.userId)">
                        <div class="card-header">
                          <div class="owner-info">
                            <h3>{{ owner.fullName }}</h3>
                            <p class="email">{{ owner.email }}</p>
                            @if (owner.phone) {
                              <p class="phone">üìû {{ owner.phone }}</p>
                            }
                          </div>
                          <div class="shop-info">
                            <h4>{{ owner.shopName }}</h4>
                            <p class="requested-date">
                              Requested: {{ formatDate(owner.requestedAt) }}
                            </p>
                          </div>
                        </div>

                        <div class="card-actions">
                          <button
                            class="approve-btn"
                            (click)="approveOwner(owner.userId, owner.fullName)"
                            [disabled]="processingUsers().has(owner.userId)"
                          >
                            @if (processingUsers().has(owner.userId) && processingActions().get(owner.userId) === 'approve') {
                              <span class="spinner-sm"></span>
                              Approving...
                            } @else {
                              ‚úÖ Approve
                            }
                          </button>
                          <button
                            class="reject-btn"
                            (click)="rejectOwner(owner.userId, owner.fullName)"
                            [disabled]="processingUsers().has(owner.userId)"
                          >
                            @if (processingUsers().has(owner.userId) && processingActions().get(owner.userId) === 'reject') {
                              <span class="spinner-sm"></span>
                              Rejecting...
                            } @else {
                              ‚ùå Reject
                            }
                          </button>
                        </div>
                      </div>
                    }
                  </div>
                </div>
              }
            </div>
          }

          <!-- Owner Invitations Tab -->
          @if (activeTab() === 'invitations') {
            <div class="tab-panel">
              <app-owner-invitations-list></app-owner-invitations-list>
            </div>
          }
        </div>

        <!-- Invite Owner Modal -->
        <app-invite-owner-modal
          [isOpen]="isInviteModalOpen"
          (modalClosed)="onModalClosed()"
          (invitationSent)="onInvitationSent()"
        ></app-invite-owner-modal>

        <!-- Success Message -->
        @if (successMessage()) {
          <div class="success-toast">
            <span class="success-icon">‚úÖ</span>
            {{ successMessage() }}
            <button class="toast-close" (click)="successMessage.set('')">‚úï</button>
          </div>
        }
      </div>
    </app-admin-layout>
  