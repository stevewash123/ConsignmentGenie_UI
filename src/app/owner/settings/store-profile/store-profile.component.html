
    <div class="shop-profile">
      <div class="settings-header">
        <h2>Shop Profile</h2>
        <p>Configure your shop's public information and contact details</p>
      </div>

      <form (ngSubmit)="saveProfile()" class="profile-form" *ngIf="profile()">
        <!-- Shop Logo -->
        <div class="form-section">
          <h3>Shop Logo</h3>
          <div class="logo-upload">
            <div class="logo-preview">
              <img *ngIf="profile()?.ShopLogoUrl" [src]="profile()?.ShopLogoUrl" alt="Shop Logo" />
              <div *ngIf="!profile()?.ShopLogoUrl" class="logo-placeholder">
                <span>LOGO</span>
              </div>
            </div>
            <div class="logo-actions">
              <input
                type="file"
                #logoInput
                (change)="onLogoSelect($event)"
                accept="image/png,image/jpeg,image/jpg"
                style="display: none;">
              <button type="button" class="btn-secondary" (click)="logoInput.click()">Upload Logo</button>
              <button
                *ngIf="profile()?.ShopLogoUrl"
                type="button"
                class="btn-danger-outline"
                (click)="removeLogo()">
                Remove
              </button>
              <div class="upload-hint">Recommended: 200x200px, PNG/JPG</div>
            </div>
          </div>
        </div>

        <!-- Shop Name & Description -->
        <div class="form-section">
          <div class="form-group">
            <label for="shopName">Shop Name *</label>
            <input
              type="text"
              id="shopName"
              [(ngModel)]="profile()!.ShopName"
              name="shopName"
              class="form-input"
              placeholder="Your shop name"
              required>
          </div>

          <div class="form-group">
            <label for="shopDescription">Shop Description</label>
            <textarea
              id="shopDescription"
              [(ngModel)]="profile()!.ShopDescription"
              name="shopDescription"
              class="form-textarea"
              placeholder="A brief description of your shop..."
              rows="3"></textarea>
          </div>
        </div>

        <!-- Contact Information -->
        <div class="form-section">
          <h3>Contact Information</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="phone">Phone</label>
              <input
                type="tel"
                id="phone"
                [(ngModel)]="profile()!.ShopPhone"
                name="phone"
                class="form-input"
                placeholder="(555) 123-4567">
            </div>
            <div class="form-group">
              <label for="email">Email</label>
              <input
                type="email"
                id="email"
                [(ngModel)]="profile()!.ShopEmail"
                name="email"
                class="form-input"
                placeholder="info@yourshop.com">
            </div>
          </div>

          <div class="form-group">
            <label for="website">Website</label>
            <input
              type="url"
              id="website"
              [(ngModel)]="profile()!.ShopWebsite"
              name="website"
              class="form-input"
              placeholder="https://yourshop.com">
          </div>
        </div>

        <!-- Address -->
        <div class="form-section">
          <h3>Address</h3>
          <div class="form-group">
            <label for="street">Street Address *</label>
            <input
              type="text"
              id="street"
              [(ngModel)]="profile()!.ShopAddress1"
              name="street"
              class="form-input"
              placeholder="123 Main Street"
              required>
          </div>

          <div class="form-group">
            <label for="street2">Address Line 2</label>
            <input
              type="text"
              id="street2"
              [(ngModel)]="profile()!.ShopAddress2"
              name="street2"
              class="form-input"
              placeholder="Suite 100, Building A, etc.">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="city">City *</label>
              <input
                type="text"
                id="city"
                [(ngModel)]="profile()!.ShopCity"
                name="city"
                class="form-input"
                placeholder="Austin"
                required>
            </div>
            <div class="form-group">
              <label for="state">State *</label>
              <select
                id="state"
                [(ngModel)]="profile()!.ShopState"
                name="state"
                class="form-select"
                required>
                <option value="">Select State</option>
                <option *ngFor="let state of states" [value]="state.code">{{ state.name }}</option>
              </select>
            </div>
            <div class="form-group">
              <label for="zip">ZIP *</label>
              <input
                type="text"
                id="zip"
                [(ngModel)]="profile()!.ShopZip"
                name="zip"
                class="form-input"
                placeholder="78701"
                required>
            </div>
          </div>
        </div>

        <!-- Timezone -->
        <div class="form-section">
          <div class="form-group">
            <label for="timezone">Timezone *</label>
            <select
              id="timezone"
              [(ngModel)]="profile()!.ShopTimezone"
              name="timezone"
              class="form-select"
              required>
              <option value="">Select Timezone</option>
              <option *ngFor="let tz of timezones" [value]="tz.value">{{ tz.label }}</option>
            </select>
          </div>
        </div>

        <!-- Business Settings -->
        <div class="form-section">
          <h3>Business Settings</h3>
          <div class="form-group">
            <label for="taxRate">Sales Tax Rate (%)</label>
            <input
              type="number"
              id="taxRate"
              [(ngModel)]="profile()!.TaxRate"
              name="taxRate"
              class="form-input"
              placeholder="0.00"
              min="0"
              max="100"
              step="0.01"
              #taxRateInput>
            <div class="field-hint">Enter your local sales tax rate as a percentage (e.g., 8.25 for 8.25%)</div>
            <div *ngIf="taxRateInput.validity?.rangeOverflow || taxRateInput.validity?.rangeUnderflow" class="field-error">
              Tax rate must be between 0 and 100 percent
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="form-actions">
          <button type="button" class="btn-secondary" (click)="loadProfile()">Cancel</button>
          <button type="submit" class="btn-primary" [disabled]="isSaving()">
            {{ isSaving() ? 'Saving...' : 'Save Changes' }}
          </button>
        </div>
      </form>

      <!-- Messages -->
      <div class="messages" *ngIf="successMessage() || errorMessage()">
        <div *ngIf="successMessage()" class="message success">{{ successMessage() }}</div>
        <div *ngIf="errorMessage()" class="message error">{{ errorMessage() }}</div>
      </div>
    </div>
  