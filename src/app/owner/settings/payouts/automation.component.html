<div class="automation-section">
  <header class="settings-header">
    <h2>Automation Settings</h2>
    <p>Configure automatic payout generation and approval thresholds</p>
  </header>

  <form [formGroup]="automationForm" (ngSubmit)="onSave()">
    <!-- Automation -->
    <section class="form-section" formGroupName="automation">
      <h3>Automation Settings</h3>

      <div class="form-group">
        <label class="checkbox-label">
          <input type="checkbox" formControlName="autoGeneratePayouts">
          <span class="checkmark"></span>
          Automatically generate payouts on schedule
        </label>
        <span class="help-text">Payouts will be calculated automatically but may require approval</span>
      </div>

      <div class="automation-options" *ngIf="automationForm.get('automation.autoGeneratePayouts')?.value">
        <div class="form-group">
          <label for="autoApproveThreshold">Auto-approve payouts under</label>
          <div class="input-with-prefix">
            <span class="input-prefix">$</span>
            <input id="autoApproveThreshold" type="number" formControlName="autoApproveThreshold"
                   class="form-input" min="0" step="0.01" placeholder="100.00">
          </div>
          <span class="help-text">Small payouts will be processed automatically</span>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" formControlName="requireManualReview">
            <span class="checkmark"></span>
            Require manual review for large payouts
          </label>
        </div>

        <div class="form-group" *ngIf="automationForm.get('automation.requireManualReview')?.value">
          <label for="manualReviewThreshold">Manual review threshold</label>
          <div class="input-with-prefix">
            <span class="input-prefix">$</span>
            <input id="manualReviewThreshold" type="number" formControlName="manualReviewThreshold"
                   class="form-input" min="0" step="0.01" placeholder="500.00">
          </div>
          <span class="help-text">Payouts over this amount will require manual approval</span>
        </div>
      </div>
    </section>

    <!-- Form Actions -->
    <div class="form-actions">
      <button type="submit" [disabled]="!automationForm.valid || saving()" class="btn-primary">
        {{ saving() ? 'Saving...' : 'Save Automation Settings' }}
      </button>
    </div>
  </form>

  <!-- Messages -->
  <div class="messages" *ngIf="successMessage() || errorMessage()">
    <div *ngIf="successMessage()" class="message success">{{ successMessage() }}</div>
    <div *ngIf="errorMessage()" class="message error">{{ errorMessage() }}</div>
  </div>
</div>