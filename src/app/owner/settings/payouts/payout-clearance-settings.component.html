<div class="settings-page">
  <div class="page-header">
    <div class="header-content">
      <h1>Payout Clearance Settings</h1>
      <p class="header-subtitle">Configure when payments clear and minimum payout thresholds</p>
    </div>

    <div class="header-actions" *ngIf="!loading()">
      <button
        class="btn btn-secondary"
        type="button"
        [disabled]="saving()"
        (click)="onRestoreDefaults()">
        <i class="fas fa-undo" aria-hidden="true"></i>
        Restore Defaults
      </button>

      <button
        class="btn btn-outline"
        type="button"
        [disabled]="!hasChanges() || saving()"
        (click)="onReset()">
        Reset Changes
      </button>

      <button
        class="btn btn-primary"
        type="button"
        [disabled]="!hasChanges() || settingsForm.invalid || saving()"
        (click)="onSave()">
        <span *ngIf="!saving()">
          <i class="fas fa-save" aria-hidden="true"></i>
          Save Settings
        </span>
        <span *ngIf="saving()">
          <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
          Saving...
        </span>
      </button>
    </div>
  </div>

  <!-- Success/Error Messages -->
  <div class="alert alert-success" *ngIf="successMessage()" role="alert">
    <i class="fas fa-check-circle" aria-hidden="true"></i>
    {{ successMessage() }}
  </div>

  <div class="alert alert-error" *ngIf="errorMessage()" role="alert">
    <i class="fas fa-exclamation-circle" aria-hidden="true"></i>
    {{ errorMessage() }}
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="loading()">
    <i class="fas fa-spinner fa-spin"></i>
    <span>Loading payout settings...</span>
  </div>

  <!-- Settings Form -->
  <form [formGroup]="settingsForm" *ngIf="!loading()" class="settings-form">

    <!-- Customer Payment Clearance Section -->
    <div class="settings-section">
      <div class="section-header">
        <h2>Customer Payment Clearance Days</h2>
        <p class="section-description">
          Number of days after a customer pays before funds are available for consignor payouts
        </p>
      </div>

      <div class="settings-grid">
        <div class="form-group">
          <label for="clearanceDaysCash" class="form-label">
            Cash
            <span class="help-text">Immediate payment, typically clears instantly</span>
          </label>
          <input
            type="number"
            id="clearanceDaysCash"
            class="form-input"
            formControlName="clearanceDaysCash"
            min="0" max="30">
          <div class="field-error" *ngIf="getFieldError('clearanceDaysCash')">
            {{ getFieldError('clearanceDaysCash') }}
          </div>
        </div>

        <div class="form-group">
          <label for="clearanceDaysDebitCard" class="form-label">
            Debit Card
            <span class="help-text">Usually clears next business day</span>
          </label>
          <input
            type="number"
            id="clearanceDaysDebitCard"
            class="form-input"
            formControlName="clearanceDaysDebitCard"
            min="0" max="30">
          <div class="field-error" *ngIf="getFieldError('clearanceDaysDebitCard')">
            {{ getFieldError('clearanceDaysDebitCard') }}
          </div>
        </div>

        <div class="form-group">
          <label for="clearanceDaysCreditCard" class="form-label">
            Credit Card
            <span class="help-text">Standard 2-3 business days</span>
          </label>
          <input
            type="number"
            id="clearanceDaysCreditCard"
            class="form-input"
            formControlName="clearanceDaysCreditCard"
            min="0" max="30">
          <div class="field-error" *ngIf="getFieldError('clearanceDaysCreditCard')">
            {{ getFieldError('clearanceDaysCreditCard') }}
          </div>
        </div>

        <div class="form-group">
          <label for="clearanceDaysCheck" class="form-label">
            Check
            <span class="help-text">Typically 7-10 business days</span>
          </label>
          <input
            type="number"
            id="clearanceDaysCheck"
            class="form-input"
            formControlName="clearanceDaysCheck"
            min="0" max="30">
          <div class="field-error" *ngIf="getFieldError('clearanceDaysCheck')">
            {{ getFieldError('clearanceDaysCheck') }}
          </div>
        </div>

        <div class="form-group">
          <label for="clearanceDaysStoreCredit" class="form-label">
            Store Credit
            <span class="help-text">Available immediately</span>
          </label>
          <input
            type="number"
            id="clearanceDaysStoreCredit"
            class="form-input"
            formControlName="clearanceDaysStoreCredit"
            min="0" max="30">
          <div class="field-error" *ngIf="getFieldError('clearanceDaysStoreCredit')">
            {{ getFieldError('clearanceDaysStoreCredit') }}
          </div>
        </div>

        <div class="form-group">
          <label for="clearanceDaysGiftCard" class="form-label">
            Gift Card
            <span class="help-text">Available immediately</span>
          </label>
          <input
            type="number"
            id="clearanceDaysGiftCard"
            class="form-input"
            formControlName="clearanceDaysGiftCard"
            min="0" max="30">
          <div class="field-error" *ngIf="getFieldError('clearanceDaysGiftCard')">
            {{ getFieldError('clearanceDaysGiftCard') }}
          </div>
        </div>

        <div class="form-group">
          <label for="clearanceDaysSquare" class="form-label">
            Square
            <span class="help-text">Square payment processing</span>
          </label>
          <input
            type="number"
            id="clearanceDaysSquare"
            class="form-input"
            formControlName="clearanceDaysSquare"
            min="0" max="30">
          <div class="field-error" *ngIf="getFieldError('clearanceDaysSquare')">
            {{ getFieldError('clearanceDaysSquare') }}
          </div>
        </div>

        <div class="form-group">
          <label for="clearanceDaysVenmo" class="form-label">
            Venmo
            <span class="help-text">Digital payment, clears quickly</span>
          </label>
          <input
            type="number"
            id="clearanceDaysVenmo"
            class="form-input"
            formControlName="clearanceDaysVenmo"
            min="0" max="30">
          <div class="field-error" *ngIf="getFieldError('clearanceDaysVenmo')">
            {{ getFieldError('clearanceDaysVenmo') }}
          </div>
        </div>

        <div class="form-group">
          <label for="clearanceDaysPayPal" class="form-label">
            PayPal
            <span class="help-text">Digital payment, clears quickly</span>
          </label>
          <input
            type="number"
            id="clearanceDaysPayPal"
            class="form-input"
            formControlName="clearanceDaysPayPal"
            min="0" max="30">
          <div class="field-error" *ngIf="getFieldError('clearanceDaysPayPal')">
            {{ getFieldError('clearanceDaysPayPal') }}
          </div>
        </div>

        <div class="form-group">
          <label for="clearanceDaysOther" class="form-label">
            Other Payment Methods
            <span class="help-text">Default for unknown payment types</span>
          </label>
          <input
            type="number"
            id="clearanceDaysOther"
            class="form-input"
            formControlName="clearanceDaysOther"
            min="0" max="30">
          <div class="field-error" *ngIf="getFieldError('clearanceDaysOther')">
            {{ getFieldError('clearanceDaysOther') }}
          </div>
        </div>
      </div>
    </div>

    <!-- Minimum Payout Thresholds Section -->
    <div class="settings-section">
      <div class="section-header">
        <h2>Minimum Payout Thresholds</h2>
        <p class="section-description">
          Minimum amounts required before issuing payouts via each method
        </p>
      </div>

      <div class="settings-grid">
        <div class="form-group">
          <label for="minimumPayoutCheck" class="form-label">
            Check
            <span class="help-text">Mailed check payouts</span>
          </label>
          <div class="input-with-prefix">
            <span class="input-prefix">$</span>
            <input
              type="number"
              id="minimumPayoutCheck"
              class="form-input"
              formControlName="minimumPayoutCheck"
              min="0" max="10000" step="0.01">
          </div>
          <div class="field-error" *ngIf="getFieldError('minimumPayoutCheck')">
            {{ getFieldError('minimumPayoutCheck') }}
          </div>
        </div>

        <div class="form-group">
          <label for="minimumPayoutCash" class="form-label">
            Cash
            <span class="help-text">Cash pickup payouts</span>
          </label>
          <div class="input-with-prefix">
            <span class="input-prefix">$</span>
            <input
              type="number"
              id="minimumPayoutCash"
              class="form-input"
              formControlName="minimumPayoutCash"
              min="0" max="10000" step="0.01">
          </div>
          <div class="field-error" *ngIf="getFieldError('minimumPayoutCash')">
            {{ getFieldError('minimumPayoutCash') }}
          </div>
        </div>

        <div class="form-group">
          <label for="minimumPayoutVenmo" class="form-label">
            Venmo
            <span class="help-text">Venmo digital payouts</span>
          </label>
          <div class="input-with-prefix">
            <span class="input-prefix">$</span>
            <input
              type="number"
              id="minimumPayoutVenmo"
              class="form-input"
              formControlName="minimumPayoutVenmo"
              min="0" max="10000" step="0.01">
          </div>
          <div class="field-error" *ngIf="getFieldError('minimumPayoutVenmo')">
            {{ getFieldError('minimumPayoutVenmo') }}
          </div>
        </div>

        <div class="form-group">
          <label for="minimumPayoutPayPal" class="form-label">
            PayPal
            <span class="help-text">PayPal digital payouts</span>
          </label>
          <div class="input-with-prefix">
            <span class="input-prefix">$</span>
            <input
              type="number"
              id="minimumPayoutPayPal"
              class="form-input"
              formControlName="minimumPayoutPayPal"
              min="0" max="10000" step="0.01">
          </div>
          <div class="field-error" *ngIf="getFieldError('minimumPayoutPayPal')">
            {{ getFieldError('minimumPayoutPayPal') }}
          </div>
        </div>

        <div class="form-group">
          <label for="minimumPayoutStoreCredit" class="form-label">
            Store Credit
            <span class="help-text">Store credit payouts</span>
          </label>
          <div class="input-with-prefix">
            <span class="input-prefix">$</span>
            <input
              type="number"
              id="minimumPayoutStoreCredit"
              class="form-input"
              formControlName="minimumPayoutStoreCredit"
              min="0" max="10000" step="0.01">
          </div>
          <div class="field-error" *ngIf="getFieldError('minimumPayoutStoreCredit')">
            {{ getFieldError('minimumPayoutStoreCredit') }}
          </div>
        </div>

        <div class="form-group">
          <label for="minimumPayoutBankTransfer" class="form-label">
            Bank Transfer
            <span class="help-text">ACH/wire transfer payouts</span>
          </label>
          <div class="input-with-prefix">
            <span class="input-prefix">$</span>
            <input
              type="number"
              id="minimumPayoutBankTransfer"
              class="form-input"
              formControlName="minimumPayoutBankTransfer"
              min="0" max="10000" step="0.01">
          </div>
          <div class="field-error" *ngIf="getFieldError('minimumPayoutBankTransfer')">
            {{ getFieldError('minimumPayoutBankTransfer') }}
          </div>
        </div>

        <div class="form-group">
          <label for="minimumPayoutZelle" class="form-label">
            Zelle
            <span class="help-text">Zelle digital payouts</span>
          </label>
          <div class="input-with-prefix">
            <span class="input-prefix">$</span>
            <input
              type="number"
              id="minimumPayoutZelle"
              class="form-input"
              formControlName="minimumPayoutZelle"
              min="0" max="10000" step="0.01">
          </div>
          <div class="field-error" *ngIf="getFieldError('minimumPayoutZelle')">
            {{ getFieldError('minimumPayoutZelle') }}
          </div>
        </div>
      </div>
    </div>

  </form>
</div>