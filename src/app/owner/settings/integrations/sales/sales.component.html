<div class="section">
  <h2 class="section-title">Sales Management</h2>
  <p class="section-description">Configure your point of sale and online storefront options</p>

  <!-- Loading State -->
  @if (isLoading()) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Loading sales settings...</p>
    </div>
  }

  <!-- Shop Management Section -->
  <div class="choice-section">
    <h3 class="choice-title">How do you want to run your shop?</h3>

    <div class="choice-grid">
      <!-- Option 1: Use Square -->
      <div
        class="choice-card"
        [class.selected]="shopChoice === 'square'"
        (click)="selectShopChoice('square')">
        <input type="radio" name="shopChoice" value="square" [checked]="shopChoice === 'square'" class="choice-radio">
        <div class="choice-main-content">
          <div class="choice-header">
            <div class="choice-text-section">
              <h4 class="choice-label">I use Square</h4>
            </div>
            <div class="choice-icon">ðŸ”²</div>
          </div>
          <div class="choice-benefits">
            <div class="benefit-item">â€¢ Connect Square, sync inventory from Square</div>
            <div class="benefit-item">â€¢ Import all sales automatically</div>
            <div class="benefit-item">â€¢ Use your existing Square setup</div>
            <div class="benefit-item">â€¢ Keep your current workflows and hardware</div>
          </div>
        </div>
      </div>

      <!-- Option 2: Use ConsignmentGenie -->
      <div
        class="choice-card"
        [class.selected]="shopChoice === 'consignmentgenie'"
        (click)="selectShopChoice('consignmentgenie')">
        <input type="radio" name="shopChoice" value="consignmentgenie" [checked]="shopChoice === 'consignmentgenie'" class="choice-radio">
        <div class="choice-main-content">
          <div class="choice-header">
            <div class="choice-text-section">
              <h4 class="choice-label">I don't use Square</h4>
            </div>
            <div class="choice-icon">ðŸ“±</div>
          </div>
          <div class="choice-benefits">
            <div class="benefit-item">â€¢ Manage inventory in ConsignmentGenie</div>
            <div class="benefit-item">â€¢ Use ConsignmentGenie POS system</div>
            <div class="benefit-item">â€¢ Built-in consignment workflows</div>
            <div class="benefit-item">â€¢ Optional online storefront later</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Square Integration Section - Show when Square is selected -->
  @if (shopChoice === 'square') {
    <div class="choice-section">
      <h3 class="choice-title">Square Integration</h3>

      <div class="integration-card">
        <div class="integration-header">
          <div class="integration-icon">ðŸ”²</div>
          <div class="integration-info">
            @if (squareStatus().isConnected) {
              <h4 class="integration-title">Square Connected</h4>
              <p class="integration-description">
                @if (squareStatus().merchantName) {
                  Connected to {{ squareStatus().merchantName }}
                } @else {
                  Your Square account is connected
                }
              </p>
              <div class="status-indicator connected">âœ“ CONNECTED</div>
            } @else {
              <h4 class="integration-title">Connect to Square</h4>
              <p class="integration-description">Connect your Square account to sync inventory and sales data</p>
            }
          </div>
        </div>

        @if (squareStatus().isConnected) {
          <button
            type="button"
            class="disconnect-button"
            (click)="disconnectFromSquare()">
            Disconnect from Square
          </button>
        } @else {
          <button
            type="button"
            class="connect-button"
            (click)="connectToSquare()"
            [disabled]="isConnecting()">
            @if (isConnecting()) {
              <div class="spinner"></div>
              Connecting...
            } @else {
              Connect to Square
            }
          </button>
        }
      </div>
    </div>
  }

</div>