<div class="approval-workflow-section">
  <header class="section-header">
    <h2 class="section-title">Approval Workflow</h2>
    <p class="section-description">Configure how new consignors are approved to start selling items</p>
  </header>

  <div *ngIf="successMessage()" class="message success">{{ successMessage() }}</div>
  <div *ngIf="errorMessage()" class="message error">{{ errorMessage() }}</div>

  <div *ngIf="isLoading()" class="loading">
    <p>Loading workflow settings...</p>
  </div>

  <div *ngIf="!isLoading()">
    <section class="form-section">
      <h3>Approval Process</h3>

      <form [formGroup]="approvalForm" (ngSubmit)="saveWorkflowSettings()">
        <div class="checkbox-group">
          <div class="checkbox-item">
            <input type="checkbox"
                   id="autoApproveNewConsignors"
                   formControlName="autoApproveNewConsignors">
            <div>
              <label for="autoApproveNewConsignors" class="checkbox-label">
                Auto-approve new consignors
              </label>
              <div class="checkbox-description">
                New consignors can immediately start adding items without manual review
              </div>
            </div>
          </div>
        </div>

        <div style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 1.5rem;">
          <button type="button" (click)="loadWorkflowSettings()" class="btn-secondary">
            Reset Changes
          </button>
          <button type="submit"
                  class="btn-primary"
                  [disabled]="!approvalForm.valid || isSaving()">
            {{ isSaving() ? 'Saving...' : 'Save Settings' }}
          </button>
        </div>
      </form>

      <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 6px; padding: 1rem; margin-top: 1.5rem;"
           *ngIf="approvalForm.get('autoApproveNewConsignors')?.value">
        <h4 style="color: #92400e; font-weight: 600; margin-bottom: 0.5rem;">Auto-Approval Enabled</h4>
        <p style="color: #92400e; font-size: 0.875rem; margin: 0;">
          New consignors can immediately start adding items. You can review and manage consignors in the main Consignors section.
        </p>
      </div>

      <div style="background: #eff6ff; border: 1px solid #3b82f6; border-radius: 6px; padding: 1rem; margin-top: 1.5rem;"
           *ngIf="!approvalForm.get('autoApproveNewConsignors')?.value">
        <h4 style="color: #1e40af; font-weight: 600; margin-bottom: 0.5rem;">Manual Approval Required</h4>
        <p style="color: #1e40af; font-size: 0.875rem; margin: 0;">
          New consignors will need your approval before they can add items. Check the Consignors section to review pending requests.
        </p>
      </div>
    </section>
  </div>
</div>