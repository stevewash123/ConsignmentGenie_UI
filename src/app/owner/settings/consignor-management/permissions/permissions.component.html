<div class="permissions-section">
  <header class="section-header">
    <h2 class="section-title">Default Permissions</h2>
    <p class="section-description">Set default permissions that apply to newly approved consignors</p>
  </header>

  <div *ngIf="successMessage()" class="message success">{{ successMessage() }}</div>
  <div *ngIf="errorMessage()" class="message error">{{ errorMessage() }}</div>

  <div *ngIf="isLoading()" class="loading">
    <p>Loading permission settings...</p>
  </div>

  <div *ngIf="!isLoading()">

    <!-- Permissions Form -->
    <form [formGroup]="permissionsForm" (ngSubmit)="saveDefaultPermissions()">
      <!-- Inventory Permissions -->
      <section class="form-section">
        <div class="permission-group">
          <h4>Inventory Management</h4>
          <div class="permission-list" formGroupName="inventory">
            <div class="permission-item">
              <input type="checkbox" id="canAddItems" formControlName="canAddItems">
              <div class="permission-content">
                <div class="permission-label">Can add new items</div>
                <div class="permission-description">Allow consignors to add new items to the inventory</div>
              </div>
            </div>

            <div class="permission-item">
              <input type="checkbox" id="canEditOwnItems" formControlName="canEditOwnItems">
              <div class="permission-content">
                <div class="permission-label">Can edit their own items</div>
                <div class="permission-description">Allow consignors to modify descriptions, photos, etc. of their items</div>
              </div>
            </div>

            <div class="permission-item">
              <input type="checkbox" id="canRemoveOwnItems" formControlName="canRemoveOwnItems">
              <div class="permission-content">
                <div class="permission-label">Can remove/withdraw their own items</div>
                <div class="permission-description">Allow consignors to remove items from sale</div>
              </div>
            </div>

            <div class="permission-item">
              <input type="checkbox" id="canEditPrices" formControlName="canEditPrices">
              <div class="permission-content">
                <div class="permission-label">Can edit item prices</div>
                <div class="permission-description">Allow consignors to change prices on their items</div>
              </div>
            </div>



          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <div>
              <button type="button" (click)="resetToDefaults()" class="btn-secondary">
                Reset to Defaults
              </button>
            </div>

            <div style="display: flex; gap: 1rem;">
              <button type="submit"
                      class="btn-primary"
                      [disabled]="!permissionsForm.valid || isSaving()">
                {{ isSaving() ? 'Saving...' : 'Save Default Permissions' }}
              </button>
            </div>
          </div>
        </div>
      </section>
    </form>
  </div>
</div>