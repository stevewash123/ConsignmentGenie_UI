<div class="basic-info-section">
  <header class="section-header">
    <h2>Basic Information</h2>
    <p>Essential details about your store and how customers can reach you</p>
  </header>

  <form [formGroup]="basicInfoForm" class="basic-info-form">

    <!-- Store Identity -->
    <section class="form-section">
      <h3>Store Identity</h3>

      <div class="form-group">
        <label for="storeName">Store Name *</label>
        <input
          id="storeName"
          type="text"
          formControlName="storeName"
          class="form-input"
          placeholder="Your Store Name"
          maxlength="100">
        <div class="char-count">{{ getCharacterCount('storeName') }}/100</div>
        <div *ngIf="basicInfoForm.get('storeName')?.invalid && basicInfoForm.get('storeName')?.touched"
             class="field-error">
          <div *ngIf="basicInfoForm.get('storeName')?.hasError('required')">Store name is required</div>
          <div *ngIf="basicInfoForm.get('storeName')?.hasError('maxlength')">Store name cannot exceed 100 characters</div>
        </div>
      </div>

      <div class="form-group">
        <label for="description">Store Description</label>
        <textarea
          id="description"
          formControlName="description"
          class="form-textarea"
          placeholder="Brief description of your store and what you offer..."
          rows="4"
          maxlength="500"></textarea>
        <div class="char-count">{{ getCharacterCount('description') }}/500</div>
      </div>

      <div class="form-group">
        <label for="website">Website</label>
        <input
          id="website"
          type="url"
          formControlName="website"
          class="form-input"
          placeholder="https://www.yourstore.com">
        <div *ngIf="basicInfoForm.get('website')?.invalid && basicInfoForm.get('website')?.touched"
             class="field-error">
          <div *ngIf="basicInfoForm.get('website')?.hasError('pattern')">Please enter a valid website URL</div>
        </div>
        <div class="help-text">Include https:// for full website URLs</div>
      </div>
    </section>

    <!-- Store Contact Information & Address -->
    <section class="form-section" formGroupName="contact">
      <h3>Store Contact Information & Address</h3>

      <div class="form-group">
        <label class="checkbox-label">
          <input
            type="checkbox"
            [(ngModel)]="useOwnerContact"
            (change)="onUseOwnerContactChange()"
            [ngModelOptions]="{standalone: true}"
            class="checkbox-input">
          <span class="checkbox-text">Use Owner's Contact Information</span>
        </label>
        <div class="help-text" *ngIf="ownerContact">
          Owner: {{ ownerContact.name }} ({{ ownerContact.email }})
          <span *ngIf="ownerContact.phone"> • {{ ownerContact.phone }}</span>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="phone">Phone Number *</label>
          <input
            id="phone"
            type="tel"
            formControlName="phone"
            class="form-input"
            placeholder="(555) 123-4567">
          <div *ngIf="basicInfoForm.get('contact.phone')?.invalid && basicInfoForm.get('contact.phone')?.touched"
               class="field-error">
            <div *ngIf="basicInfoForm.get('contact.phone')?.hasError('required')">Phone number is required</div>
            <div *ngIf="basicInfoForm.get('contact.phone')?.hasError('pattern')">Please enter a valid phone number</div>
          </div>
        </div>

        <div class="form-group">
          <label for="email">Email Address *</label>
          <input
            id="email"
            type="email"
            formControlName="email"
            class="form-input"
            placeholder="info@yourstore.com">
          <div *ngIf="basicInfoForm.get('contact.email')?.invalid && basicInfoForm.get('contact.email')?.touched"
               class="field-error">
            <div *ngIf="basicInfoForm.get('contact.email')?.hasError('required')">Email address is required</div>
            <div *ngIf="basicInfoForm.get('contact.email')?.hasError('email')">Please enter a valid email address</div>
          </div>
        </div>
      </div>

    </section>

    <section class="form-section" formGroupName="address">
      <div class="form-group">
        <label for="street1">Street Address *</label>
        <input
          id="street1"
          type="text"
          formControlName="street1"
          class="form-input"
          placeholder="123 Main Street">
        <div *ngIf="basicInfoForm.get('address.street1')?.invalid && basicInfoForm.get('address.street1')?.touched"
             class="field-error">
          <div *ngIf="basicInfoForm.get('address.street1')?.hasError('required')">Street address is required</div>
        </div>
      </div>

      <div class="form-group">
        <label for="street2">Address Line 2</label>
        <input
          id="street2"
          type="text"
          formControlName="street2"
          class="form-input"
          placeholder="Suite 100">
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="city">City *</label>
          <input
            id="city"
            type="text"
            formControlName="city"
            class="form-input"
            placeholder="City">
          <div *ngIf="basicInfoForm.get('address.city')?.invalid && basicInfoForm.get('address.city')?.touched"
               class="field-error">
            <div *ngIf="basicInfoForm.get('address.city')?.hasError('required')">City is required</div>
          </div>
        </div>

        <div class="form-group">
          <label for="state">State *</label>
          <select
            id="state"
            formControlName="state"
            class="form-select">
            <option value="">Select State</option>
            <option *ngFor="let state of states" [value]="state.code">{{ state.name }}</option>
          </select>
          <div *ngIf="basicInfoForm.get('address.state')?.invalid && basicInfoForm.get('address.state')?.touched"
               class="field-error">
            <div *ngIf="basicInfoForm.get('address.state')?.hasError('required')">State is required</div>
          </div>
        </div>

        <div class="form-group">
          <label for="zipCode">ZIP Code *</label>
          <input
            id="zipCode"
            type="text"
            formControlName="zipCode"
            class="form-input"
            placeholder="12345">
          <div *ngIf="basicInfoForm.get('address.zipCode')?.invalid && basicInfoForm.get('address.zipCode')?.touched"
               class="field-error">
            <div *ngIf="basicInfoForm.get('address.zipCode')?.hasError('required')">ZIP code is required</div>
            <div *ngIf="basicInfoForm.get('address.zipCode')?.hasError('pattern')">Please enter a valid ZIP code</div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="checkbox-label">
          <input
            type="checkbox"
            formControlName="showPublicly"
            class="checkbox-input">
          <span class="checkbox-text">Show address to customers publicly</span>
        </label>
        <div class="help-text">Uncheck if you operate from home or prefer privacy</div>
      </div>
    </section>

    <!-- Auto-save Status -->
    <div class="auto-save-status">
      <div class="save-indicator">
        <span class="status-icon">✓</span>
        <span>{{ autoSaveStatus() }}</span>
      </div>
      <small class="save-note">Changes are saved automatically as you type</small>
    </div>
  </form>

  <!-- Messages -->
  <div class="messages" *ngIf="successMessage() || errorMessage()">
    <div *ngIf="successMessage()" class="message success">{{ successMessage() }}</div>
    <div *ngIf="errorMessage()" class="message error">{{ errorMessage() }}</div>
  </div>
</div>