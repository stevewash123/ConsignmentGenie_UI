
<app-owner-layout>
      <div class="consignor-detail-container" *ngIf="!isProviderLoading(); else loading">
      <!-- Header with breadcrumb and actions following UI patterns guide -->
      <div class="detail-header">
        <div class="breadcrumb">
          <button class="btn-secondary back-button" routerLink="/owner/consignors">
            ← Back to Consignors
          </button>
        </div>
        <div class="header-actions">
          <div class="dropdown">
            <button class="btn-primary dropdown-toggle" type="button">
              Actions ▼
            </button>
            <div class="dropdown-menu">
              <a class="dropdown-item" [routerLink]="['/owner/consignors', providerId(), 'edit']">
                Edit Consignor
              </a>
              <div class="dropdown-divider"></div>
              <button
                class="dropdown-item"
                *ngIf="consignor()?.isActive"
                (click)="deactivateProvider()"
                [disabled]="isSubmitting()"
              >
                {{ isSubmitting() ? 'Deactivating...' : 'Deactivate' }}
              </button>
              <button
                class="dropdown-item"
                *ngIf="!consignor()?.isActive"
                (click)="activateProvider()"
                [disabled]="isSubmitting()"
              >
                {{ isSubmitting() ? 'Activating...' : 'Activate' }}
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Entity header following UI patterns guide -->
      <div class="entity-header" *ngIf="consignor()">
        <div class="entity-title-section">
          <h1 class="entity-name">{{ consignor()!.name }}</h1>
          <div class="entity-meta">
            <span class="status-badge" [class.status-active]="consignor()!.isActive" [class.status-inactive]="!consignor()!.isActive">
              {{ consignor()!.isActive ? 'Active' : 'Inactive' }}
            </span>
            <span class="secondary-info">Consignor #{{ consignor()!.consignorNumber }}</span>
          </div>
        </div>
      </div>

      <div class="consignor-detail-card" *ngIf="consignor()">

        <div class="consignor-info">
          <div class="info-section">
            <h3>Contact Information</h3>
            <div class="info-grid">
              <div class="info-item">
                <label>Email:</label>
                <span>{{ consignor()!.email }}</span>
              </div>
              <div class="info-item" *ngIf="consignor()!.phone">
                <label>Phone:</label>
                <span>{{ consignor()!.phone }}</span>
              </div>
              <div class="info-item" *ngIf="consignor()!.address">
                <label>Address:</label>
                <span>{{ consignor()!.address }}</span>
              </div>
            </div>
          </div>

          <div class="info-section">
            <h3>Business Information</h3>
            <div class="info-grid">
              <div class="info-item">
                <label>Commission Rate:</label>
                <span>{{ consignor()!.commissionRate }}%</span>
              </div>
              <div class="info-item" *ngIf="consignor()!.preferredPaymentMethod">
                <label>Preferred Payment:</label>
                <span>{{ consignor()!.preferredPaymentMethod }}</span>
              </div>
              <div class="info-item" *ngIf="consignor()!.paymentDetails">
                <label>Payment Details:</label>
                <span>{{ consignor()!.paymentDetails }}</span>
              </div>
              <div class="info-item" *ngIf="consignor()!.consignorNumber">
                <label>consignor Number:</label>
                <span>{{ consignor()!.consignorNumber }}</span>
              </div>
            </div>
          </div>

          <div class="info-section" *ngIf="consignor()!.notes">
            <h3>Notes</h3>
            <p class="notes">{{ consignor()!.notes }}</p>
          </div>
        </div>

        <div class="consignor-stats">
          <div class="stat-card">
            <div class="stat-number">{{ stats().totalItems || 0 }}</div>
            <div class="stat-label">Total Items</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">{{ stats().activeItems || 0 }}</div>
            <div class="stat-label">Active Items</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">{{ stats().soldItems || 0 }}</div>
            <div class="stat-label">Sold Items</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">{{ stats().totalEarnings | currency:'USD':'symbol':'1.2-2' }}</div>
            <div class="stat-label">Total Earnings</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">{{ stats().pendingPayout | currency:'USD':'symbol':'1.2-2' }}</div>
            <div class="stat-label">Pending Payout</div>
          </div>
        </div>

        <div class="recent-activity">
          <h3>Recent Activity</h3>
          <div class="activity-list">
            <div class="activity-item" *ngFor="let activity of recentActivity()">
              <div class="activity-icon">{{ getActivityIcon(activity.type) }}</div>
              <div class="activity-content">
                <div class="activity-description">{{ activity.description }}</div>
                <div class="activity-date">{{ activity.date | date:'short' }}</div>
              </div>
              <div class="activity-amount" *ngIf="activity.amount">
                {{ activity.amount | currency:'USD':'symbol':'1.2-2' }}
              </div>
            </div>
          </div>
          <div class="no-activity" *ngIf="recentActivity().length === 0">
            No recent activity
          </div>
        </div>
      </div>

      <div class="error-message" *ngIf="errorMessage()">
        {{ errorMessage() }}
      </div>
    </div>

    <ng-template #loading>
      <div class="loading">Loading consignor details...</div>
    </ng-template>
    </app-owner-layout>
  