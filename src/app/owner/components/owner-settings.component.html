
    <app-layout>
      <div class="settings-container">
        <div class="settings-header">
          <h1>Organization Settings</h1>
          <p>Manage your shop settings and integrations</p>
        </div>

        <!-- General Settings -->
        <div class="settings-section">
          <h2>General Information</h2>
          <div class="settings-card">
            <div class="setting-group" *ngIf="organization()">
              <label for="orgName">Organization Name</label>
              <input
                type="text"
                id="orgName"
                [(ngModel)]="organization()!.name"
                class="form-input"
                placeholder="Your shop name"
              >
            </div>

            <div class="setting-group">
              <label>Subscription</label>
              <div class="subscription-info" *ngIf="organization()">
                <span class="tier-badge" [class]="'tier-' + organization()!.subscriptionTier.toLowerCase()">
                  {{ organization()!.subscriptionTier }}
                </span>
                <span class="status-badge" [class]="'status-' + organization()!.subscriptionStatus.toLowerCase()">
                  {{ organization()!.subscriptionStatus }}
                </span>
              </div>
            </div>

            <div class="setting-actions">
              <button class="btn-primary" (click)="saveGeneralSettings()" [disabled]="saving()">
                {{ saving() ? 'Saving...' : 'Save Changes' }}
              </button>
            </div>
          </div>
        </div>

        <!-- QuickBooks Integration -->
        <div class="settings-section">
          <h2>QuickBooks Integration</h2>
          <div class="settings-card">
            <div class="integration-header">
              <div class="integration-info">
                <h3>QuickBooks Desktop/Online</h3>
                <p>Sync customers, items, and transactions with QuickBooks for seamless accounting.</p>
              </div>
              <div class="integration-status">
                <span class="status-indicator" [class.connected]="organization()?.quickBooksConnected">
                  {{ organization()?.quickBooksConnected ? 'Connected' : 'Not Connected' }}
                </span>
              </div>
            </div>

            <div class="integration-details" *ngIf="organization()?.quickBooksConnected">
              <div class="detail-item">
                <span class="detail-label">Last Sync:</span>
                <span class="detail-value">{{ organization()!.quickBooksLastSync ? (organization()!.quickBooksLastSync | date:'medium') : 'Never' }}</span>
              </div>
              <div class="sync-actions">
                <button class="btn-secondary" (click)="syncQuickBooks()" [disabled]="syncing()">
                  {{ syncing() ? 'Syncing...' : 'Sync Now' }}
                </button>
                <button class="btn-danger" (click)="disconnectQuickBooks()" [disabled]="syncing()">
                  Disconnect
                </button>
              </div>
            </div>

            <div class="integration-setup" *ngIf="!organization()?.quickBooksConnected">
              <div class="setup-features">
                <h4>What you'll get:</h4>
                <ul>
                  <li>✅ Automatic customer sync</li>
                  <li>✅ Item and inventory sync</li>
                  <li>✅ Sales transaction export</li>
                  <li>✅ consignor payout tracking</li>
                  <li>✅ Real-time financial reporting</li>
                </ul>
              </div>
              <button class="btn-primary btn-large" (click)="connectQuickBooks()" [disabled]="connecting()">
                {{ connecting() ? 'Connecting...' : 'Connect to QuickBooks' }}
              </button>
            </div>
          </div>
        </div>

        <!-- Square Integration -->
        <div class="settings-section">
          <h2>Square Integration</h2>
          <div class="settings-card">
            <div class="integration-header">
              <div class="integration-info">
                <h3>Square Point of Sale</h3>
                <p>Connect your Square POS system for unified payment processing and inventory management.</p>
              </div>
              <div class="integration-status">
                <span class="status-indicator" [class.connected]="organization()?.squareConnected">
                  {{ organization()?.squareConnected ? 'Connected' : 'Not Connected' }}
                </span>
              </div>
            </div>

            <div class="integration-details" *ngIf="organization()?.squareConnected">
              <div class="detail-item">
                <span class="detail-label">Location ID:</span>
                <span class="detail-value">{{ organization()!.squareLocationId || 'Not set' }}</span>
              </div>
              <div class="sync-actions">
                <button class="btn-secondary" (click)="syncSquare()" [disabled]="syncing()">
                  {{ syncing() ? 'Syncing...' : 'Sync Inventory' }}
                </button>
                <button class="btn-danger" (click)="disconnectSquare()" [disabled]="syncing()">
                  Disconnect
                </button>
              </div>
            </div>

            <div class="integration-setup" *ngIf="!organization()?.squareConnected">
              <div class="setup-features">
                <h4>What you'll get:</h4>
                <ul>
                  <li>✅ Unified inventory management</li>
                  <li>✅ Real-time payment processing</li>
                  <li>✅ Customer data synchronization</li>
                  <li>✅ Sales analytics and reporting</li>
                  <li>✅ Multi-location support</li>
                </ul>
              </div>
              <button class="btn-primary btn-large" (click)="connectSquare()" [disabled]="connecting()">
                {{ connecting() ? 'Connecting...' : 'Connect to Square' }}
              </button>
            </div>
          </div>
        </div>

        <!-- Success/Error Messages -->
        <div class="message-container">
          <div *ngIf="successMessage()" class="message success">
            <span class="message-icon">✅</span>
            {{ successMessage() }}
          </div>
          <div *ngIf="errorMessage()" class="message error">
            <span class="message-icon">❌</span>
            {{ errorMessage() }}
          </div>
        </div>
      </div>
    </app-layout>
  