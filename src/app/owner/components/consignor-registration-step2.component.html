
    <div class="registration-container">
      <div class="registration-card">
        <!-- Header -->
        <div class="registration-header">
          <button class="back-button" (click)="goBack()">
            ‚Üê Back
          </button>
          <h1>Complete Your Profile</h1>
          <p class="shop-info" *ngIf="shopName()">
            You're joining <strong>{{ shopName() }}</strong>
          </p>
          <p class="step-info">Step 2 of 2: Tell us about yourself</p>
        </div>

        <!-- Profile Form -->
        <form (ngSubmit)="onSubmit()" #profileForm="ngForm" *ngIf="!isSubmitted()">
          <div class="form-group">
            <label for="fullName">Full Name *</label>
            <input
              type="text"
              id="fullName"
              name="fullName"
              [(ngModel)]="details.fullName"
              required
              #nameField="ngModel"
              class="form-control"
              [class.error]="nameField.invalid && nameField.touched"
              placeholder="Enter your full name">
            <div class="error-message" *ngIf="nameField.invalid && nameField.touched">
              Full name is required
            </div>
          </div>

          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input
              type="tel"
              id="phone"
              name="phone"
              [(ngModel)]="details.phone"
              #phoneField="ngModel"
              class="form-control"
              placeholder="(555) 123-4567">
            <div class="form-hint">Optional - helps the shop owner contact you</div>
          </div>

          <!-- Summary -->
          <div class="registration-summary">
            <h3>Registration Summary</h3>
            <div class="summary-item">
              <span class="summary-label">Email:</span>
              <span class="summary-value">{{ registrationData()?.credentials?.email }}</span>
            </div>
            <div class="summary-item">
              <span class="summary-label">Shop:</span>
              <span class="summary-value">{{ shopName() }}</span>
            </div>
          </div>

          <div class="form-actions">
            <button
              type="submit"
              class="btn-primary"
              [disabled]="profileForm.invalid || isSubmitting()">
              {{ isSubmitting() ? 'Creating Account...' : 'Complete Registration' }}
            </button>
          </div>

          <div class="error-message" *ngIf="errorMessage()">
            {{ errorMessage() }}
          </div>
        </form>

        <!-- Success State -->
        <div class="success-state" *ngIf="isSubmitted()">
          <div class="success-icon">üéâ</div>
          <h2>Welcome to {{ shopName() }}!</h2>
          <p>
            Your consignor account has been created successfully.
          </p>
          <p>
            You can now sign in and start managing your consigned items with {{ shopName() }}.
          </p>
          <button class="btn-primary" (click)="goToLogin()">
            Sign In to Your Account
          </button>
        </div>

        <!-- Invalid State -->
        <div class="error-state" *ngIf="isInvalidRegistration()">
          <div class="error-icon">‚ö†Ô∏è</div>
          <h2>Registration Session Expired</h2>
          <p>
            Your registration session has expired. Please start over with a fresh invitation link.
          </p>
          <button class="btn-secondary" (click)="goToHome()">
            Go to Home
          </button>
        </div>
      </div>
    </div>
  