
    <app-owner-layout>
      <div class="owner-dashboard">
        <div class="dashboard-header">
          <h1>{{ getCurrentUser()?.organizationName || 'Shop' }} Dashboard</h1>
          <p>Welcome back, {{ getCurrentUser()?.email?.split('@')[0] || 'Owner' }}! Here's what's happening in your consignment shop.</p>
        </div>

        <!-- Key Metrics -->
        <div class="metrics-grid" *ngIf="summary(); else loadingMetrics">
          <div class="metric-card">
            <div class="metric-content">
              <h3>Inventory Value</h3>
              <div class="metric-value">\${{ summary()!.inventoryValue | number:'1.2-2' }}</div>
            </div>
          </div>

          <a routerLink="/owner/payouts" class="metric-card pending-payouts"
             [ngClass]="{ 'has-pending': summary()!.pendingPayoutCount > 0 }">
            <div class="metric-content">
              <h3>Pending Payouts</h3>
              <div class="metric-value">\${{ summary()!.pendingPayouts | number:'1.2-2' }}</div>
              <span *ngIf="summary()!.pendingPayoutCount > 0" class="action-hint">â†’ Click to process</span>
            </div>
          </a>
        </div>

        <ng-template #loadingMetrics>
          <div class="loading" data-cy="loading-indicator">Loading dashboard data...</div>
        </ng-template>

        <!-- Quick Actions -->
        <div class="actions-section">
          <h2>Quick Actions</h2>
          <div class="action-grid">
            <a routerLink="/owner/record-sale" class="action-card">
              <h3>Record Sale</h3>
              <p>Record a new transaction and automatically calculate splits</p>
            </a>

            <a routerLink="/owner/consignors" class="action-card">
              <h3>Manage Consignors</h3>
              <p>View consignors, update commission rates, and track performance</p>
            </a>

            <a routerLink="/owner/payouts" class="action-card">
              <h3>Generate Payouts</h3>
              <p>Create payout reports and process consignor payments</p>
            </a>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="activity-section" *ngIf="summary()?.recentTransactions?.length">
          <h2>Recent Transactions</h2>
          <div class="transactions-table">
            <div class="table-header">
              <div class="col-date">Date</div>
              <div class="col-item">Item</div>
              <div class="col-consignor">Consignor</div>
              <div class="col-amount">Sale Amount</div>
              <div class="col-commission">Commission</div>
            </div>
            <div class="table-body">
              <div class="transaction-row" *ngFor="let transaction of summary()!.recentTransactions">
                <div class="col-date">{{ transaction.date | date:'short' }}</div>
                <div class="col-item">{{ transaction.itemName }}</div>
                <div class="col-consignor">{{ transaction.consignor }}</div>
                <div class="col-amount">\${{ transaction.amount | number:'1.2-2' }}</div>
                <div class="col-commission">\${{ transaction.commission | number:'1.2-2' }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Onboarding Welcome Modal -->
      <app-owner-welcome-modal
        [isVisible]="showWelcomeModal()"
        [shopName]="getCurrentUser()?.organizationName || 'Your Shop'"
        [onboardingStatus]="onboardingStatus()"
        (closed)="closeWelcomeModal()"
        (dismissed)="dismissWelcomeModal()"
        (stepClicked)="navigateToStep($event)">
      </app-owner-welcome-modal>
    </app-owner-layout>
  